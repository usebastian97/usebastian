---
import { useTranslations } from '@i18n/utils';

const t = useTranslations('en');
---

<div>
  <form class="space-y-6" id="contact-form">
    <div>
      <label for="name" class="mb-2 block text-sm font-medium">
        {t('contact.name')}
      </label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full rounded-xl border-4 border-gray-200 bg-gray-50 px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-black focus:bg-white focus:ring-1 focus:ring-black focus:outline-none"
        placeholder="John Doe"
      />
    </div>

    <div>
      <label for="email" class="mb-2 block text-sm font-medium">
        {t('contact.email')}
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full rounded-xl border-4 border-gray-200 bg-gray-50 px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-black focus:bg-white focus:ring-1 focus:ring-black focus:outline-none"
        placeholder="john@example.com"
      />
    </div>

    <div>
      <label for="message" class="mb-2 block text-sm font-medium">
        {t('contact.message')}
      </label>
      <textarea
        id="message"
        name="message"
        rows="6"
        required
        class="w-full resize-none rounded-xl border-4 border-gray-200 bg-gray-50 px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-black focus:bg-white focus:ring-1 focus:ring-black focus:outline-none"
        placeholder="How can I help you?"></textarea>
    </div>

    <button
      type="submit"
      class="btn-primary w-full rounded-xl px-6 py-3.5 text-base font-medium shadow-sm focus:ring-2 focus:ring-black focus:ring-offset-2 focus:outline-none"
    >
      {t('contact.send')}
    </button>

    <div id="form-message" class="hidden text-center"></div>
  </form>
</div>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const message = document.getElementById('form-message');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData);

    try {
      // In production, this would send to your backend or service like Resend
      console.log('Form submission:', data);

      // Show success message
      if (message) {
        message.textContent = "Message sent successfully! I'll get back to you soon.";
        message.className = 'text-center text-green-600';
        message.classList.remove('hidden');
      }

      form.reset();

      setTimeout(() => {
        message?.classList.add('hidden');
      }, 5000);
    } catch (error) {
      console.error(error);
      if (message) {
        message.textContent = 'Failed to send message. Please try again or email directly.';
        message.className = 'text-center text-red-600';
        message.classList.remove('hidden');
      }
    }
  });
</script>
