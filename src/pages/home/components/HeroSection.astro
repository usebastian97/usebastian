---
import { useTranslations, defaultLang } from '@/i18n/utils';
import type { Language } from '@/i18n/utils';
import { Icon } from 'astro-icon/components';
interface Props {
  lang: Language;
}

const { lang } = Astro.props;
// Fallback to default language if lang is undefined or invalid
const safeLang = lang || defaultLang;
const t = useTranslations(safeLang);

// Additional safety check to ensure t function exists
if (!t) {
  throw new Error(`Translation function not available for language: ${safeLang}`);
}
---

<section
  class="relative overflow-hidden border-b border-gray-200 bg-white"
>

  <div class="container relative mx-auto px-4 py-16 sm:px-6 sm:py-10 lg:px-8">
    <!-- Single column centered layout -->
    <div class="mx-auto max-w-4xl text-center">
      <!-- Hero Image -->
      <div class="fade-in mb-8">
        <img
          src="/home/hero-icons.png"
          alt="Cloud Computing Icons"
          class="mx-auto h-auto w-full max-w-xl"
          loading="eager"
        />
      </div>

      <!-- Main headline -->
      <h1
        class="slide-in-up mb-4 text-4xl font-bold leading-[1.1] tracking-tight text-gray-900 sm:text-5xl lg:text-6xl"
      >
        {t('home.hero.title')}
      </h1>

      <!-- Subtitle -->
      <p class="font-fuzzy slide-in-up mb-4 text-xl font-normal text-gray-600 sm:text-2xl">
        {t('home.hero.subtitle')}
      </p>

      <!-- Description -->
      <p
        class="slide-in-up mx-auto mb-8 max-w-2xl text-base leading-relaxed text-gray-500"
      >
        {t('home.hero.description')}
      </p>

      <!-- CTA Buttons -->
      <div class="slide-in-up mb-10 flex flex-row items-center justify-center gap-3">
        <a href="/projects" class="btn-primary group inline-flex items-center space-x-1 rounded-xl px-4 py-2 text-sm sm:space-x-2 sm:px-6 sm:py-3 sm:text-base">
          <span>{t('home.hero.cta.primary')}</span>
          <Icon
            name="lucide:arrow-right"
            class="h-3 w-3 stroke-[1.5] transition-transform duration-200 group-hover:translate-x-1 sm:h-4 sm:w-4"
          />
        </a>

        <a href="#" download class="btn-outline inline-flex items-center space-x-1 rounded-xl px-4 py-2 text-sm sm:space-x-2 sm:px-6 sm:py-3 sm:text-base">
          <span>{t('home.hero.cta.secondary')}</span>
        </a>
      </div>

      <!-- Social Media Icons -->
      <div class="slide-in-up mb-10 flex items-center justify-center gap-4">
        <a
          href="https://linkedin.com/in/usebastian12"
          target="_blank"
          rel="noopener noreferrer"
          class="social-icon-link"
          aria-label="LinkedIn"
        >
          <Icon name="simple-icons:linkedin" class="h-5 w-5 sm:h-6 sm:w-6" />
        </a>
        <a
          href="https://github.com/usebastian97"
          target="_blank"
          rel="noopener noreferrer"
          class="social-icon-link"
          aria-label="GitHub"
        >
          <Icon name="simple-icons:github" class="h-5 w-5 sm:h-6 sm:w-6" />
        </a>
        <a
          href="https://substack.com/@yourprofile"
          target="_blank"
          rel="noopener noreferrer"
          class="social-icon-link"
          aria-label="Substack"
        >
          <Icon name="simple-icons:substack" class="h-5 w-5 sm:h-6 sm:w-6" />
        </a>
        <a
          href="https://x.com/sutoiu12"
          target="_blank"
          rel="noopener noreferrer"
          class="social-icon-link"
          aria-label="X (Twitter)"
        >
          <Icon name="simple-icons:x" class="h-5 w-5 sm:h-6 sm:w-6" />
        </a>
        <a
          href="https://instagram.com/usebastian12"
          target="_blank"
          rel="noopener noreferrer"
          class="social-icon-link"
          aria-label="Instagram"
        >
          <Icon name="simple-icons:instagram" class="h-5 w-5 sm:h-6 sm:w-6" />
        </a>
      </div>

      <!-- Trusted Companies Scroller -->
      <!-- <div class="slide-in-up">
        <TrustedCompaniesScroller />
      </div> -->
    </div>
  </div>
</section>

<script>
  // Prevent unwanted clicks on the hero section
  document.addEventListener('DOMContentLoaded', () => {
    const heroSection = document.querySelector('section');
    if (heroSection) {
      heroSection.addEventListener('click', (e) => {
        // Only allow clicks on links and buttons
        const target = e.target as HTMLElement;
        const isClickableElement = target.closest('a') || target.closest('button');
        
        if (!isClickableElement) {
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        }
      });
    }
  });
</script>

<style>
  .social-icon-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    border-radius: 9999px;
    color: #6b7280;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }

  .social-icon-link:hover {
    color: #111827;
    background-color: #f3f4f6;
    border-color: #e5e7eb;
    transform: translateY(-2px);
  }

  @media (min-width: 640px) {
    .social-icon-link {
      padding: 0.625rem;
    }
  }
</style>