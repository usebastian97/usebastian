---
import { useTranslations } from '@i18n/utils';

const t = useTranslations('en');
---

<div>
  <form class="space-y-6" id="contact-form">
    <div>
      <label for="name" class="mb-2 block text-sm font-medium">
        {t('contact.name')}
      </label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 dark:border-gray-700 dark:bg-gray-900 dark:text-white"
      />
    </div>

    <div>
      <label for="email" class="mb-2 block text-sm font-medium">
        {t('contact.email')}
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 dark:border-gray-700 dark:bg-gray-900 dark:text-white"
      />
    </div>

    <div>
      <label for="message" class="mb-2 block text-sm font-medium">
        {t('contact.message')}
      </label>
      <textarea
        id="message"
        name="message"
        rows="6"
        required
        class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 dark:border-gray-700 dark:bg-gray-900 dark:text-white"
      ></textarea>
    </div>

    <button
      type="submit"
      class="w-full rounded-lg bg-blue-600 px-6 py-3 font-medium text-white transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2"
    >
      {t('contact.send')}
    </button>

    <div id="form-message" class="hidden text-center"></div>
  </form>
</div>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const message = document.getElementById('form-message');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData);

    try {
      // In production, this would send to your backend or service like Resend
      console.log('Form submission:', data);

      // Show success message
      if (message) {
        message.textContent = 'Message sent successfully! I\'ll get back to you soon.';
        message.className = 'text-center text-green-600 dark:text-green-400';
        message.classList.remove('hidden');
      }

      form.reset();

      setTimeout(() => {
        message?.classList.add('hidden');
      }, 5000);
    } catch (error) {
      console.error(error);
      if (message) {
        message.textContent = 'Failed to send message. Please try again or email directly.';
        message.className = 'text-center text-red-600 dark:text-red-400';
        message.classList.remove('hidden');
      }
    }
  });
</script>
